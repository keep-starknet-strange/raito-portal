@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 220 13% 5%;  /* #0D0D0D */
    --foreground: 0 0% 100%;   /* #FFFFFF */
    --card: 220 13% 7%;        /* #131313 */
    --card-foreground: 0 0% 100%;
    --primary: 33 100% 54%;    /* #F7931A - Bitcoin orange */
    --primary-foreground: 0 0% 0%;
    --secondary: 220 13% 11%;  /* #1C1C1C */
    --secondary-foreground: 0 0% 100%;
    --muted: 220 13% 11%;
    --muted-foreground: 220 9% 78%;  /* #C7C7C7 */
    --accent: 220 13% 11%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 62% 30%;
    --destructive-foreground: 0 85% 60%;
    --border: 220 13% 15%;
    --input: 220 13% 15%;
    --ring: 33 100% 54%;       /* #F7931A */
    --radius: 0.75rem;
    
    /* Light mode variants */
    --light-background: 0 0% 98%;
    --light-foreground: 220 13% 5%;
    --light-card: 0 0% 100%;
    --light-surface: 220 13% 95%;
    --light-surface-alt: 220 13% 92%;
    --light-border: 220 13% 85%;
  }

  /* Light theme class */
  .light {
    --background: var(--light-background);
    --foreground: var(--light-foreground);
    --card: var(--light-card);
    --surface: var(--light-surface);
    --surface-alt: var(--light-surface-alt);
    --border: var(--light-border);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    height: 8px;
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-surface;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-bitcoin/50 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-bitcoin/70;
  }

  html {
    @apply scroll-smooth;
  }
  
  body {
    @apply bg-background text-foreground font-sans antialiased;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply text-foreground font-semibold tracking-tight;
  }
  
  .hash-text {
    @apply font-mono text-sm break-all;
  }
  
  .block-stream-bg {
    background-image: repeating-linear-gradient(
      90deg,
      transparent,
      transparent 20px,
      rgba(247, 147, 26, 0.1) 20px,
      rgba(247, 147, 26, 0.1) 22px
    );
    animation: block-stream 45s linear infinite;
    opacity: 0.06;
    pointer-events: none;
  }
  
  .verification-glow {
    box-shadow: 0 0 20px rgba(0, 210, 106, 0.3);
  }
  
  .bitcoin-glow {
    box-shadow: 0 0 16px rgba(247, 147, 26, 0.6);
  }
}

@layer components {
  /* Block streaming animation */
  .block-stream-container {
    overflow: hidden;
    position: relative;
  }

  .block-stream-bg {
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(247, 147, 26, 0.03) 25%, 
      rgba(247, 147, 26, 0.06) 50%, 
      rgba(247, 147, 26, 0.03) 75%, 
      transparent 100%
    );
    background-size: 200% 100%;
    animation: streamFlow 8s ease-in-out infinite;
  }

  @keyframes streamFlow {
    0%, 100% { 
      background-position: -200% 0; 
      opacity: 0.3;
    }
    50% { 
      background-position: 200% 0; 
      opacity: 0.8;
    }
  }

  /* Enhanced block cube animations */
  .block-cube {
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .block-cube::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(247, 147, 26, 0.2),
      transparent
    );
    transition: left 0.6s ease;
  }

  .block-cube:hover::before {
    left: 100%;
  }

  .block-cube:hover {
    transform: scale(1.05) translateY(-4px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 
                0 0 30px rgba(247, 147, 26, 0.2);
  }

  /* Hash flicker effect */
  .hash-flicker {
    position: relative;
    display: inline-block;
    transition: all 0.3s ease;
  }

  .hash-flicker:hover .hash-chars {
    animation: hashFlicker 0.8s ease-in-out;
  }

  @keyframes hashFlicker {
    0%, 100% { opacity: 1; }
    10% { opacity: 0.8; }
    20% { opacity: 0.9; }
    30% { opacity: 0.7; }
    40% { opacity: 1; }
    50% { opacity: 0.6; }
    60% { opacity: 0.9; }
    70% { opacity: 0.8; }
    80% { opacity: 1; }
    90% { opacity: 0.7; }
  }

  /* Matrix-style character cycling */
  .hash-chars span {
    display: inline-block;
    transition: all 0.1s ease;
  }

  .hash-flicker:hover .hash-chars span:nth-child(odd) {
    animation: charCycle 0.6s ease-in-out;
    animation-delay: calc(var(--char-index) * 0.05s);
  }

  @keyframes charCycle {
    0%, 100% { transform: translateY(0); opacity: 1; }
    25% { transform: translateY(-2px); opacity: 0.7; }
    50% { transform: translateY(2px); opacity: 0.5; }
    75% { transform: translateY(-1px); opacity: 0.8; }
  }

  /* Loading skeleton animations */
  .skeleton {
    background: linear-gradient(
      90deg,
      hsl(var(--surface)) 25%,
      hsl(var(--surface-alt)) 50%,
      hsl(var(--surface)) 75%
    );
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s ease-in-out infinite;
  }

  @keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Smooth page transitions */
  .page-transition {
    animation: pageSlideIn 0.4s ease-out;
  }

  @keyframes pageSlideIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Enhanced glow effects */
  .glow-pulse {
    animation: glowPulse 2s ease-in-out infinite;
  }

  @keyframes glowPulse {
    0%, 100% {
      box-shadow: 0 0 10px rgba(247, 147, 26, 0.3);
    }
    50% {
      box-shadow: 0 0 20px rgba(247, 147, 26, 0.6),
                  0 0 30px rgba(247, 147, 26, 0.3);
    }
  }

  /* Floating animation for recent blocks */
  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-6px); }
  }

  /* Ripple effect for clicks */
  .ripple {
    position: relative;
    overflow: hidden;
  }

  .ripple::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(247, 147, 26, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .ripple:active::before {
    width: 300px;
    height: 300px;
  }
}

@layer utilities {
  /* Theme transition utilities */
  .theme-transition {
    transition: background-color 0.3s ease, 
                color 0.3s ease, 
                border-color 0.3s ease,
                box-shadow 0.3s ease;
  }

  /* Enhanced responsive utilities */
  .container-padding {
    @apply px-4 sm:px-6 lg:px-8;
  }

  /* Bitcoin-themed custom utilities */
  .text-bg-base { color: hsl(var(--bg-base)); }
  .bg-bg-base { background-color: hsl(var(--bg-base)); }
  .text-surface { color: hsl(var(--surface)); }
  .bg-surface { background-color: hsl(var(--surface)); }
  .text-surface-alt { color: hsl(var(--surface-alt)); }
  .bg-surface-alt { background-color: hsl(var(--surface-alt)); }
  .text-text-primary { color: hsl(var(--text-primary)); }
  .text-text-secondary { color: hsl(var(--text-secondary)); }

  /* Mobile-specific utilities */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .mobile-text-base {
    @apply text-base;
  }

  .mobile-text-lg {
    @apply text-lg;
  }

  .mobile-p-safe {
    padding-bottom: env(safe-area-inset-bottom);
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Mobile input enhancements */
  .mobile-input {
    @apply text-base; /* Prevents zoom on iOS */
    font-size: 16px !important; /* Force 16px to prevent zoom */
    -webkit-appearance: none;
    border-radius: 8px;
  }

  .mobile-hash-input {
    @apply mobile-input font-mono;
    word-break: break-all;
    line-height: 1.4;
    padding: 16px 12px;
    min-height: 56px;
  }

  /* Mobile button enhancements */
  .mobile-button {
    @apply touch-target;
    min-height: 48px;
    font-size: 16px;
    padding: 12px 20px;
  }

  .mobile-icon-button {
    @apply touch-target;
    min-height: 44px;
    min-width: 44px;
    padding: 10px;
  }

  /* Mobile navigation */
  .mobile-nav {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
  }

  /* Mobile modal optimizations */
  .mobile-modal {
    max-height: calc(100vh - 40px);
    max-width: calc(100vw - 32px);
    margin: 20px 16px;
  }

  .mobile-terminal {
    max-height: calc(100vh - 80px);
    max-width: calc(100vw - 24px);
    margin: 40px 12px;
    min-height: 400px;
  }

  /* Mobile card layouts */
  .mobile-card {
    margin: 0 -4px;
    border-radius: 12px 12px 0 0;
  }

  .mobile-grid {
    display: grid;
    gap: 12px;
    grid-template-columns: 1fr;
  }

  .mobile-stats-grid {
    display: grid;
    gap: 8px;
    grid-template-columns: 1fr 1fr;
  }

  /* Mobile typography scaling */
  .mobile-h1 {
    @apply text-3xl sm:text-4xl lg:text-5xl;
    line-height: 1.1;
  }

  .mobile-h2 {
    @apply text-2xl sm:text-3xl lg:text-4xl;
    line-height: 1.2;
  }

  .mobile-h3 {
    @apply text-xl sm:text-2xl;
    line-height: 1.3;
  }

  /* Mobile spacing utilities */
  .mobile-spacing {
    @apply py-6 sm:py-8 lg:py-12;
  }

  .mobile-section-spacing {
    @apply py-8 sm:py-12 lg:py-16;
  }

  /* Mobile scroll improvements */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  /* Mobile-specific animations */
  .mobile-slide-up {
    animation: mobileSlideUp 0.3s ease-out;
  }

  @keyframes mobileSlideUp {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Mobile hover states (disable on touch) */
  @media (hover: hover) {
    .mobile-hover:hover {
      transform: scale(1.02);
    }
  }

  @media (hover: none) {
    .mobile-hover:active {
      transform: scale(0.98);
      transition: transform 0.1s ease;
    }
  }

  /* Mobile-specific responsive breakpoints */
  .mobile-only {
    @apply block sm:hidden;
  }

  .desktop-only {
    @apply hidden sm:block;
  }

  .tablet-up {
    @apply hidden md:block;
  }
}

/* Terminal Verifier Animations */
@keyframes matrix-fall {
  0% {
    transform: translateY(-100px);
    opacity: 0;
  }
  10% {
    opacity: 0.8;
  }
  90% {
    opacity: 0.8;
  }
  100% {
    transform: translateY(100vh);
    opacity: 0;
  }
}

@keyframes terminal-dots {
  0%, 20% { opacity: 0; }
  50% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes terminal-glow {
  0%, 100% { text-shadow: 0 0 5px #4ade80; }
  50% { text-shadow: 0 0 20px #4ade80, 0 0 30px #4ade80; }
}

@keyframes terminal-flicker {
  0%, 98% { opacity: 1; }
  99% { opacity: 0.8; }
  100% { opacity: 1; }
}

.matrix-rain {
  animation: matrix-fall linear infinite;
  writing-mode: vertical-rl;
  text-orientation: upright;
  pointer-events: none;
}

.loading-dots .dot {
  animation: terminal-dots 1.5s infinite;
}

.loading-dots .dot:nth-child(1) { animation-delay: 0s; }
.loading-dots .dot:nth-child(2) { animation-delay: 0.3s; }
.loading-dots .dot:nth-child(3) { animation-delay: 0.6s; }

.glow-text {
  animation: terminal-glow 2s ease-in-out infinite;
}

.terminal-flicker {
  animation: terminal-flicker 0.15s infinite linear;
}
